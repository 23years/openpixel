// Open Pixel v1.0.0 | Created By Stuart Yamartino | MIT License | Copyright (c) 2016 Dockwa, Inc.
!function(e,t,n,r,i){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u={id:"",version:"1"},s=function(e){return"undefined"!=typeof e&&null!==e&&""!==e},c=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},g={nameAndVersion:function(){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],"IE "+(e[1]||"")):"Chrome"===n[1]&&(e=t.match(/\b(OPR|Edge)\/(\d+)/),null!=e)?e.slice(1).join(" ").replace("OPR","Opera"):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),n.join(" "))},isMobile:function(){return"ontouchstart"in t},userAgent:function(){return e.navigator.userAgent}},l={prefix:function(){return"__"+r+"_"},set:function(e,n,r){var i=arguments.length<=3||void 0===arguments[3]?"/":arguments[3],a="";if(s(r)){var o=new Date;o.setTime(o.getTime()+60*r*1e3),a="; expires="+o.toGMTString()}t.cookie=this.prefix()+e+"="+n+a+"; path="+i},get:function(e){for(var e=this.prefix()+e+"=",n=t.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(e))return i.substring(e.length,i.length)}},"delete":function(e){this.set(e,"",-100)},exists:function(e){return s(this.get(e))}},m={getParameterByName:function(t,n){n||(n=e.location.href),t=t.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)","i"),i=r.exec(n);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null},hasParameter:function(e,t){return s(getParameterByName(e,t))}},f=function(){function r(e){a(this,r),this.params=[],this.event=e,this.attr={id:"getId",uid:"getUserId",ev:"getEvent",v:"getVerion",dl:"getDocumentLocation",rl:"getReferrerLocation",ts:"getTimestamp",de:"getDocumentEncoding",sr:"getScreenResolution",vp:"getViewport",cd:"getColorDepth",dt:"getDocumentTitle",bn:"getBrowserName",md:"getMobileDevice",ua:"getUserAgent",utm_source:"getUtmSource",utm_medium:"getUtmMedium",utm_term:"getUtmTerm",utm_content:"getUtmContent",utm_campaign:"getUtmCampaign"},this.buildParams(),this.send()}return o(r,[{key:"buildParams",value:function(){for(var e in this.attr)this.attr.hasOwnProperty(e)&&this.setParam(e,this[this.attr[e]](e))}},{key:"getId",value:function(){return u.id}},{key:"getUserId",value:function(){return l.get("uid")}},{key:"getEvent",value:function(){return this.event}},{key:"getVerion",value:function(){return u.version}},{key:"getDocumentLocation",value:function(){return e.location.href}},{key:"getReferrerLocation",value:function(){return t.referrer}},{key:"getTimestamp",value:function(){return n.t}},{key:"getDocumentEncoding",value:function(){return t.characterSet}},{key:"getScreenResolution",value:function(){return e.screen.width+"x"+e.screen.height}},{key:"getViewport",value:function(){return e.innerWidth+"x"+e.innerHeight}},{key:"getColorDepth",value:function(){return e.screen.colorDepth}},{key:"getDocumentTitle",value:function(){return t.title}},{key:"getBrowserName",value:function(){return g.nameAndVersion()}},{key:"getMobileDevice",value:function(){return g.isMobile()}},{key:"getUserAgent",value:function(){return g.userAgent()}},{key:"getUtmSource",value:function(e){return m.getParameterByName(e)}},{key:"getUtmMedium",value:function(e){return m.getParameterByName(e)}},{key:"getUtmTerm",value:function(e){return m.getParameterByName(e)}},{key:"getUtmContent",value:function(e){return m.getParameterByName(e)}},{key:"getUtmCampaign",value:function(e){return m.getParameterByName(e)}},{key:"setParam",value:function(e,t){s(t)?this.params.push(e+"="+t):this.params.push(e+"=")}},{key:"send",value:function(){e.navigator.sendBeacon?this.sendBeacon():this.sendImage()}},{key:"sendBeacon",value:function(){e.navigator.sendBeacon(this.getSourceUrl())}},{key:"sendImg",value:function(){this.img=t.createElement("img"),this.img.src=this.getSourceUrl(),this.img.style.display="none",this.img.width="1",this.img.height="1",t.getElementsByTagName("body")[0].appendChild(this.img)}},{key:"getSourceUrl",value:function(){return i+"?"+encodeURI(this.params.join("&"))}}]),r}(),h={process:function(t,n){"init"==t?(u.id=n,l.exists("uid")||l.set("uid",c(),1051200)):"pageview"==n?u.pageViewOnce||l.exists("pageview")||(u.pageViewOnce=!0,l.set("pageview","true",10,e.location.pathname),new f(n)):"event"==t&&"pageclose"!=n&&new f(n)}};n.process=function(){h.process.apply(this,arguments)};for(var p=0,d=n.queue.length;d>p;p++)n.process.apply(n,n.queue[p]);e.addEventListener("unload",function(t){u.pageCloseOnce||l.exists("pageclose")||(u.pageCloseOnce=!0,l.set("pageclose","true",10,e.location.pathname),new f("pageclose"))})}(window,document,window.opix,"opix","http://stu.ngrok.io/pixel.gif");